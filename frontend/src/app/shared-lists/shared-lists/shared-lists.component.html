<h2>Listas compartidas contigo</h2>

<mat-progress-spinner
  *ngIf="isLoading"
  diameter="40"
  mode="indeterminate"
></mat-progress-spinner>

<!-- Estado vacío -->
<mat-card
  *ngIf="!isLoading && lists.length === 0"
  class="empty-card mat-elevation-z1"
>
  <mat-icon class="empty-icon">group_off</mat-icon>
  <h3>No tienes listas compartidas</h3>
  <p>
    Aún no te han compartido ninguna lista. Cuando alguien lo haga, aparecerán
    aquí.
  </p>
</mat-card>

<!-- Listas -->
<mat-accordion *ngIf="pagedLists.length > 0" multi>
  <mat-expansion-panel
    *ngFor="let list of pagedLists; let i = index"
    [expanded]="isExpanded(i)"
  >
    <mat-expansion-panel-header (click)="toggle(i)">
      <mat-panel-title>
        <strong>{{ list.name || list.title }}</strong>
      </mat-panel-title>
      <mat-panel-description>
        ({{ list.products.length }} producto{{
          list.products.length === 1 ? "" : "s"
        }})
      </mat-panel-description>
    </mat-expansion-panel-header>

    <ul class="products-list">
      <li *ngFor="let product of list.products">{{ product.name }}</li>
    </ul>
  </mat-expansion-panel>
</mat-accordion>

<!-- Paginador -->
<mat-paginator
  *ngIf="lists.length > pageSize"
  [length]="lists.length"
  [pageSize]="pageSize"
  [pageSizeOptions]="[5, 10, 20]"
  (page)="onPageChange($event)"
>
</mat-paginator>

<!-- Error -->
<div *ngIf="errorMessage" class="error-msg">
  {{ errorMessage }}
</div>
